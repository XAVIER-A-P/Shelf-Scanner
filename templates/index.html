{% extends "base.html" %}

{% block content %}
<div class="flex flex-col items-center justify-center space-y-8 mt-10">
    
    <div class="text-center space-y-2">
        <h2 class="text-2xl font-bold text-slate-800">What should I read?</h2>
        <p class="text-slate-500">Snap a photo of a bookshelf to get AI recommendations.</p>
    </div>

    <form hx-post="/scan-ui" 
          hx-encoding="multipart/form-data" 
          hx-target="#results-area" 
          hx-indicator="#loading-spinner"
          class="w-full">
        
        <label for="camera-input" 
               class="flex flex-col items-center justify-center w-full h-64 border-2 border-indigo-300 border-dashed rounded-xl cursor-pointer bg-slate-50 hover:bg-indigo-50 transition-colors relative overflow-hidden group">
            
            <div class="flex flex-col items-center justify-center pt-5 pb-6 z-10">
                <svg class="w-12 h-12 mb-4 text-indigo-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
                </svg>
                <p class="mb-2 text-sm text-slate-600"><span class="font-semibold">Tap to take photo</span></p>
                <p class="text-xs text-slate-500">or upload from gallery</p>
            </div>
            
            <input id="camera-input" type="file" name="file" accept="image/*" capture="environment" class="hidden" onchange="this.form.requestSubmit()" />
            
            <div id="loading-spinner" class="htmx-indicator absolute inset-0 bg-indigo-900/10 backdrop-blur-sm flex items-center justify-center">
                 <div class="w-full h-1 bg-indigo-500 absolute scanner-line shadow-[0_0_10px_#6366f1]"></div>
                 <span class="bg-white px-4 py-2 rounded-full shadow-lg font-bold text-indigo-600 z-20">Analyzing Spines...</span>
            </div>
        </label>
    </form>

    <div id="results-area" class="w-full">
        </div>

</div>
{% endblock %}